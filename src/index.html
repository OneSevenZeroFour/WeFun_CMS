<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>首页</title>
	<link rel="stylesheet" href="css/home.css">
	<link rel="stylesheet" href="lib/font-iphone/iconfont.css">
	<link rel="stylesheet" href="css/qqmoji.css">
</head>
<body>
	<header></header>

	<!-- 吸顶菜单 -->
	<div class="ui-fixed-top" id="ui-fixed-top" >
	    <div class="ui-fixed-box">
	        <a href="#" target="_self" class="ui-fixLogo"></a>
	        <ul class="ui-nav-bar-list">
	            <li class="now"><a href="#" class="navStats" >首页</a></li>
	            
	            <li class="haiT-nav">
	            	<a href="#" class="haiT-nav-home" >幸运星期一</a>
	            </li>
                <li class="haiT-nav haschild">
                	<a href="javascript:;" class="haiT-nav-home" >直邮专区</a>
                    <ul class="haiT-child">
                		<li><a href="#">欧洲直邮</a></li>
	                </ul>
	            </li>
                <li class="haiT-nav">
                	<a href="#" class="haiT-nav-home" >品牌专区</a>
                </li>
	            <li class="haiT-nav">
	            	<a href="#" class="haiT-nav-home" >会员俱乐部</a>
	            </li>
	        </ul>
	      
	        <div class="fix-mallSearch-input rt" id="fix-mallSearch-input" ><div id="mallSearch" class="mallSearch clearfix">
            <div class="mallSearch-form clearfix">
                <form method="get">  
                        <div class="mallSearch-input">                           
                            <div class="s-combobox" id="s-combobox">
                                <div class="s-combobox-input-wrap">
                                    <input type="text"  maxlength="50" placeholder='搜索 母婴之家 商品/品牌' autocomplete="off">
                                </div> 
                            </div>
                            <button type="button" id="btnSearch"><i class="iconimg-searchbtn"></i></button>
                        </div>
                   
                </form>
            </div>
           
            
        </div></div>
	    </div>
	</div>

	<!-- 右侧固定栏 -->
	<div class='slidebar'>
		
	</div>
	
	<!-- 主体部分 -->
	<div class='outerbox'>
		<div class='banner wrap'>
		</div>
		<div class='adtop wrap'>
			<a href="html/list.html"><img src="./img/adtop01.jpg" alt=""><div class='border4'></div></a>
			<a href="html/list.html"><img src="./img/adtop02.jpg" alt=""><div class='border4'></div></a>
			<a href="html/list.html"><img src="./img/adtop03.jpg" alt=""><div class='border4'></div></a>
		</div>
		<div class='specialProduct wrap'>
			<div class='hotfloor'>
				<div class='ui-title'>
					<span class='inblock span1'></span>
					<span class='inblock titleImg span3'></span>
					<span class='inblock span1'></span>
				</div>
			</div>	
			<div class='sgoodlist'>	
			</div>
		</div>

		<div class='hotProduct wrap'>
			<div class='hotfloor'>
				<div class='site-floor-dt-fl'>
					<span class='inblock span1'></span>
					<span class='inblock titleImg span3'></span>
					<span class='inblock span1'></span>
				</div>
			</div >
			<div class='hgoodslist'>	
			</div>
		</div>

		<div class='uiBrandAreaBox wrap'>
			<div class='hotfloor'>
				<div class='site-floor-dt-fl'>
					<span class='inblock span1'></span>
					<span class='inblock titleImg span3'></span>
					<span class='inblock span1'></span>
				</div>
			</div>
			<div class='ui-brand-box'>
				<ul class='ui-brand-ul'>
					<li>
						<a href="" class='big brandStats'><img src="img/pai01.jpg" alt=""></a>
						<a href=""><img src="img/wyeth.jpg" alt=""></a>
						<a href=""><img src="img/friso.jpg" alt=""></a>
						<a href=""><img src="img/illuma.jpg" alt=""></a>
						<a href=""><img src="img/moony.jpg" alt=""></a>
						<a href=""><img src="img/pouch.jpg" alt=""></a>
						<a href=""><img src="img/britax.jpg" alt=""></a>
						<a href=""><img src="img/20150709165823_1619_logo.jpg" alt=""></a>
						<a href=""><img src="img/pigeon.jpg" alt=""></a>
						<a href="" class='big brandStats'><img src="img/pai02.jpg" alt=""></a>
						<a href=""><img src="img/huggies.jpg" alt=""></a>
						<a href=""><img src="img/huawang.jpg" alt=""></a>
						<a href=""><img src="img/medela.jpg" alt=""></a>
						<a href=""><img src="img/nemans.jpg" alt=""></a>
						<a href=""><img src="img/xbxios-1.jpg" alt=""></a>
						<a href=""><img src="img/hipp.jpg" alt=""></a>
						<a href=""><img src="img/littletikes.jpg" alt=""></a>
						<a href=""><img src="img/avent.jpg" alt=""></a>
					</li>
				</ul>
			</div>
		</div>
	</div>
	
	<!-- 左侧广告栏 -->
	<div class="fixLeftImg">
	    <div class="fixLeftTop">
	        <a href="javascript:;" target="_self" data-id="specialProduct" class="area-hotProductCon"></a>
	        <a href="javascript:;" target="_self" data-id="hotProduct" class="area-specialProductCon"></a>   
	    </div>
        <div class="fixLeftAd">
            <span class="fixLeftAd_close">×</span>
            <a href="#" target="_blank" title="新人福利">
                <img src="http://img.muyingzhijia.com/img/201705/20170518131031_10_cb.png" alt="新人福利">
            </a>
        	<img style="width:auto; height:auto;z-index:2;position: absolute;border-radius:0; bottom:-15px;top:undefined; right:9px" src="http://static.boodoll.cn/mall/v16/images/myzj_law2_small.png">
        </div>
	</div>
	
	<!-- 尾部 -->
	<footer></footer>

	<!-- 右侧 -->
	<div class='slidebar'>
		<div class='user ok'>
			<div class='level-dt'>
				<a href="">
					<s class='level-icon1'></s>
				</a>
			</div>	
		</div>
		<div class='cart ok'>
			<div class='level-dt'>
				<a class='main'>
					<b class="topline" style="margin-bottom:7px;"></b>
					<s class="level-icon2"></s>
					<span>购物车</span>
					<em id="cartSlideNum">（0）</em>
					<b class="topline" style="margin-bottom:7px;"></b>
				</a>
			</div>
			<div class='shopping'>
				<dd id='shoppingCarcontainer'>
				<div id="settleup-content">
                    <div class="smt">
                    	<h4 class="fl">最新加入的商品</h4>
                    </div>  
                    <div class="smc"></div>
                  	<div class="smb">
                                    <div class="shop_cart-settlement">共<span class="mcart-p-price">&nbsp;<strong class='listqtys'></strong>&nbsp;</span>件商品　共计<span class="mcart-p-price f20">￥</span><span class="mcart-p-price"><strong class="f20 totals"></strong></span></div>
                                    <div class="shop_cart-btn"><a href="./html/cart.html" title="去购物车结算" class="sprite-icon icon-btnSettlement"  id="btn-payforgoods"></a></div>
                             </div>
                     </div>

			</dd>
			</div>
		</div>
		<div class='shoucang ok'>
			<div class='level-dt'>
				<a href=""><s class='level-icon3'></s></a>
			</div>
		</div>

		<div class='kefu ok'>
			<div class="level-dt">			    
				<a href="javascript:;" target="_self">                    
					<s class="level-icon5"></s>                    
					<span>在线客服</span>			   
				</a>		   
			</div>
			
		</div>


		<div class='top ok'>
			<div class="level-dt">			    
				<a href="javascript:;" target="_self">                    
					<s class="level-icon6"></s>			    
				</a>		   
			</div>
		</div>
	</div>
	

	<div class='talk_window'>
		<div class='chat_header'>
			<span>母婴之家  </span> <span>小鲸鱼<em class='ident'>9527</em></span><span class='closewindow'></span>
		</div>
		<div class='chat_view'>
			<ul class='msglist' id='msglist'>
				<div class='logos'><img src="http://hsetting30.ntalker.com/uploadIcon/img_entp_info/uploadIcon/kf_9722_1379909651.png" alt=""></div>
			</ul>
			

		</div>
		<div class='write'>
			<div class='chat_tool'>
				<div class='emotion'>
					<div class="qq_face">
                    <a title="微笑" type="qq" class="face qqface0">微笑</a> <a title="撇嘴" type="qq" class="face qqface1">撇嘴</a> <a title="色" type="qq" class="face qqface2">色</a> <a title="发呆" type="qq" class="face qqface3">发呆</a> <a title="得意" type="qq" class="face qqface4">得意</a> <a title="流泪" type="qq" class="face qqface5">流泪</a> <a title="害羞" type="qq" class="face qqface6">害羞</a> <a title="闭嘴" type="qq" class="face qqface7">闭嘴</a> <a title="睡" type="qq" class="face qqface8">睡</a> <a title="大哭" type="qq" class="face qqface9">大哭</a> <a title="尴尬" type="qq" class="face qqface10">尴尬</a> <a title="发怒" type="qq" class="face qqface11">发怒</a> <a title="调皮" type="qq" class="face qqface12">调皮</a> <a title="呲牙" type="qq" class="face qqface13">呲牙</a> <a title="惊讶" type="qq" class="face qqface14">惊讶</a> <a title="难过" type="qq" class="face qqface15">难过</a> <a title="酷" type="qq" class="face qqface16">酷</a> <a title="冷汗" type="qq" class="face qqface17">冷汗</a> <a title="抓狂" type="qq" class="face qqface18">抓狂</a> <a title="吐" type="qq" class="face qqface19">吐</a> <a title="偷笑" type="qq" class="face qqface20">偷笑</a> <a title="愉快" type="qq" class="face qqface21">愉快</a> <a title="白眼" type="qq" class="face qqface22">白眼</a> <a title="傲慢" type="qq" class="face qqface23">傲慢</a> <a title="饥饿" type="qq" class="face qqface24">饥饿</a> <a title="困" type="qq" class="face qqface25">困</a> <a title="惊恐" type="qq" class="face qqface26">惊恐</a> <a title="流汗" type="qq" class="face qqface27">流汗</a> <a title="憨笑" type="qq" class="face qqface28">憨笑</a> <a title="悠闲" type="qq" class="face qqface29">悠闲</a> <a title="奋斗" type="qq" class="face qqface30">奋斗</a> <a title="咒骂" type="qq" class="face qqface31">咒骂</a> <a title="疑问" type="qq" class="face qqface32">疑问</a> <a title="嘘" type="qq" class="face qqface33">嘘</a> <a title="晕" type="qq" class="face qqface34">晕</a> <a title="疯了" type="qq" class="face qqface35">疯了</a> <a title="衰" type="qq" class="face qqface36">衰</a> <a title="骷髅" type="qq" class="face qqface37">骷髅</a> <a title="敲打" type="qq" class="face qqface38">敲打</a> <a title="再见" type="qq" class="face qqface39">再见</a> <a title="擦汗" type="qq" class="face qqface40">擦汗</a> <a title="抠鼻" type="qq" class="face qqface41">抠鼻</a> <a title="鼓掌" type="qq" class="face qqface42">鼓掌</a> <a title="糗大了" type="qq" class="face qqface43">糗大了</a> <a title="坏笑" type="qq" class="face qqface44">坏笑</a> <a title="左哼哼" type="qq" class="face qqface45">左哼哼</a> <a title="右哼哼" type="qq" class="face qqface46">右哼哼</a> <a title="哈欠" type="qq" class="face qqface47">哈欠</a> <a title="鄙视" type="qq" class="face qqface48">鄙视</a> <a title="委屈" type="qq" class="face qqface49">委屈</a> <a title="快哭了" type="qq" class="face qqface50">快哭了</a> <a title="阴险" type="qq" class="face qqface51">阴险</a> <a title="亲亲" type="qq" class="face qqface52">亲亲</a> <a title="吓" type="qq" class="face qqface53">吓</a> <a title="可怜" type="qq" class="face qqface54">可怜</a> <a title="菜刀" type="qq" class="face qqface55">菜刀</a> <a title="西瓜" type="qq" class="face qqface56">西瓜</a> <a title="啤酒" type="qq" class="face qqface57">啤酒</a> <a title="篮球" type="qq" class="face qqface58">篮球</a> <a title="乒乓" type="qq" class="face qqface59">乒乓</a> <a title="咖啡" type="qq" class="face qqface60">咖啡</a> <a title="饭" type="qq" class="face qqface61">饭</a> <a title="猪头" type="qq" class="face qqface62">猪头</a> <a title="玫瑰" type="qq" class="face qqface63">玫瑰</a> <a title="凋谢" type="qq" class="face qqface64">凋谢</a> <a title="嘴唇" type="qq" class="face qqface65">嘴唇</a> <a title="爱心" type="qq" class="face qqface66">爱心</a> <a title="心碎" type="qq" class="face qqface67">心碎</a> <a title="蛋糕" type="qq" class="face qqface68">蛋糕</a> <a title="闪电" type="qq" class="face qqface69">闪电</a> <a title="炸弹" type="qq" class="face qqface70">炸弹</a> <a title="刀" type="qq" class="face qqface71">刀</a> <a title="足球" type="qq" class="face qqface72">足球</a> <a title="瓢虫" type="qq" class="face qqface73">瓢虫</a> <a title="便便" type="qq" class="face qqface74">便便</a> <a title="月亮" type="qq" class="face qqface75">月亮</a> <a title="太阳" type="qq" class="face qqface76">太阳</a> <a title="礼物" type="qq" class="face qqface77">礼物</a> <a title="拥抱" type="qq" class="face qqface78">拥抱</a> <a title="强" type="qq" class="face qqface79">强</a> <a title="弱" type="qq" class="face qqface80">弱</a> <a title="握手" type="qq" class="face qqface81">握手</a> <a title="胜利" type="qq" class="face qqface82">胜利</a> <a title="抱拳" type="qq" class="face qqface83">抱拳</a> <a title="勾引" type="qq" class="face qqface84">勾引</a> <a title="拳头" type="qq" class="face qqface85">拳头</a> <a title="差劲" type="qq" class="face qqface86">差劲</a> <a title="爱你" type="qq" class="face qqface87">爱你</a> <a title="NO" type="qq" class="face qqface88">NO</a> <a title="OK" type="qq" class="face qqface89">OK</a> <a title="爱情" type="qq" class="face qqface90">爱情</a> <a title="飞吻" type="qq" class="face qqface91">飞吻</a> <a title="跳跳" type="qq" class="face qqface92">跳跳</a> <a title="发抖" type="qq" class="face qqface93">发抖</a> <a title="怄火" type="qq" class="face qqface94">怄火</a> <a title="转圈" type="qq" class="face qqface95">转圈</a> <a title="磕头" type="qq" class="face qqface96">磕头</a> <a title="回头" type="qq" class="face qqface97">回头</a> <a title="跳绳" type="qq" class="face qqface98">跳绳</a> <a title="投降" type="qq" class="face qqface99">投降</a> <a title="激动" type="qq" class="face qqface100">激动</a> <a title="乱舞" type="qq" class="face qqface101">乱舞</a> <a title="献吻" type="qq" class="face qqface102">献吻</a> <a title="左太极" type="qq" class="face qqface103">左太极</a> <a title="右太极" type="qq" class="face qqface104">右太极</a>
                </div>
				</div>
			</div>
			<textarea placeholder='我想问' id='MSG'>
				
			</textarea>
			<div class="sendMSG" >
				<span class='over'>结束会话</span>
				<span class='Send' onclick="send()">发送</span>
				<button onclick = "addUser()">选择对话窗</button>
				<select name="" id=""></select>

			</div>	
		</div>		
	</div>
	<script src='lib/jquery-3.2.1.js'></script>
	<script src="js/socket.js"></script>
	<script>
		var talk_window = document.querySelector('.talk_window');
		// if(talk_window.style === 'block'){
			//var nameid = prompt("用户", "Jack");
			var nameid = "Jack"
			console.log(nameid);

			var curname =nameid;
			var socket = io("http://localhost:2000");
			function addUser(){console.log(666);
					socket.emit('adduser', {
						nameid,
					});
			}
			function send() {

				//发送请求
				//socket.emit('chat', document.querySelector("#MSG").value);
				//发送请求
				socket.emit('chat', {
					nameid,
					message: document.querySelector("#MSG").value,
					toId:document.querySelector("select").value
				});

				var msglist = $('#msglist');
				
				var valU = document.querySelector("#MSG").value;
				
				if(valU.indexOf('qqemoji')>=0){
					console.log(666);
					var li = $('<li/>').addClass('self').html(`
							<div style="display:block; overflow:hidden;">
								<div class='jiao'>
								
								</div>
								<span class='content'>
									<div class='${valU}'>
									</div>
								</span>
							</div>
							<div class='time'>
								
							</div>
						`)
				}else {
					var li = $('<li/>').addClass('self').html(`
						<div style="display:block; overflow:hidden;">
							<div class='jiao'>
							
							</div>
							<span class='content'>
							${valU}
							</span>
						</div>
						<div class='time'>
							
						</div>
					`);

				}

				msglist.append(li);
				showtime();
				$('#msglist').scrollTop( $('#msglist')[0].scrollHeight);
	
				//清空文本域
				$('#MSG').val('');
			}
			socket.on("getMessage",function(data){
				console.log(data);
			
				var msglist = $('#msglist');
				
					if(data.indexOf('qqemoji')>=0){
					console.log(666);
					var li = $('<li/>').html(`
							<div style="display:block; overflow:hidden;">
								<div class='jiao'>
								
								</div>
								<span class='content'>
									<div class='${data}'>
									</div>
								</span>
							</div>
							<div class='time'>
								
							</div>
						`)
				}else{
					var li = $('<li/>').html(`
						<div style="display:block; overflow:hidden;">
							<div class='jiao'>
							
							</div>
							<span class='content'>
							${data}
							</span>
						</div>
						<div class='time'>
							
						</div>
					`);
				}
				
				
				msglist.append(li);
				
				showtime();
				//显示最新消息
				$('#msglist').scrollTop( $('#msglist')[0].scrollHeight);
			});

			socket.on("showuserlist", function(data) {
					console.log(data)
					var html = data.map(function(item){
						return `
						<option value="${item.id}">${item.name}</option>
						`
					}).join("");
					document.querySelector("select").innerHTML = html;
			});

			function showtime(){
				var now = new Date();
				var h = now.getHours();
				if(h<10){
					h = '0' + h;
				}
				var m = now.getMinutes();
				if(m<10){
					m = '0' + m;
				}
				var s = now.getSeconds();
				if(s<10){
					s = '0' + s;
				}
				
				var length=$('.time').length;
				var curtime = $('.time')[length-1];
				// console.log(curtime);
				$(curtime).text(h + ':' + m + ':' + s);
			}
			
			console.log($('.emotion'));
			//表情包
			$('.emotion').on('click',function(){
				
				$('.qq_face').slideToggle();
			});

			//点击表情
			$('.emotion').on('click','a',function(){
				var idx = $(this).index();
				console.log(idx);
				$('#MSG').val(`
					qqemoji qqemoji${idx}

					`);
				
			});
	</script>

	<script src="lib/require.js" data-main="js/home"></script>
</body>
</html